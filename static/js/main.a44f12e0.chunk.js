(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{28:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(21),r=a.n(c),i=(a(28),a(13)),o=a.n(i),l=a(17),j=a(23),u=a(5),b=a(9),d=a(2),m=a(0);var h=function(e){var t=e.user,a=e.Logout,s=e.backBtn;return Object(m.jsxs)("nav",{children:[Object(m.jsx)("div",{className:"left-nav",children:Object(m.jsx)("h1",{children:"Matechat"})}),Object(m.jsxs)("h3",{className:"logged",children:["Logged as ",Object(m.jsx)("span",{children:t.name})]}),Object(m.jsxs)("div",{className:"nav-links",children:[Object(m.jsx)(b.b,{to:"/account",className:"btn btn-nav",children:"Account"}),Object(m.jsx)(b.b,{to:"/",onClick:a,className:"btn btn-nav",children:"Exit"}),s&&Object(m.jsx)(b.b,{to:"/",className:"btn btn-nav",children:"Back to chat"})]}),Object(m.jsxs)("div",{className:"burger",onClick:function(){return document.querySelector(".burger").classList.toggle("toggle"),document.querySelector(".nav-links").classList.toggle("nav-active"),void document.querySelectorAll(".nav-links *").forEach((function(e,t){e.style.animation?e.style.animation="":e.style.animation="navListFade 0.5s ease forwards ".concat(t/7+.5,"s")}))},children:[Object(m.jsx)("div",{className:"line1"}),Object(m.jsx)("div",{className:"line2"}),Object(m.jsx)("div",{className:"line3"})]})]})};var O=function(e){var t=e.name,a=e.text,s=e.user;return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:t===s.name?"currentName":"name",children:[Object(m.jsxs)("h5",{className:"message-sender",children:[t,":"]}),Object(m.jsx)("p",{className:"message-text",children:a})]})})};var p=function(e){var t=e.messages,a=e.user;return Object(m.jsx)("div",{className:"scroll-container",children:Object(m.jsx)("ul",{className:"messages",children:t.map((function(e){return Object(m.jsx)(O,{name:e.user,text:e.text,user:a},e.id)}))})})};var x=function(e){var t=e.addMessage,a=Object(s.useState)(""),n=Object(u.a)(a,2),c=n[0],r=n[1],i=Object(s.useState)(c||""),o=Object(u.a)(i,2),l=o[0],j=o[1],b=function(e){e.preventDefault(),r(l),t(l),j("")};return Object(m.jsxs)("form",{className:"message-input",onSubmit:function(e){return b(e)},children:[Object(m.jsx)("textarea",{name:"message-area",id:"message-area",placeholder:"Say something!",onChange:function(e){return j(e.target.value)},onInput:function(e){return(t=e.target).style.height="5px",void(t.style.height=t.scrollHeight+"px");var t},onKeyPress:function(e){return function(e){"Enter"===e.key&&b(e)}(e)},value:l}),Object(m.jsx)("input",{type:"submit",value:"Send"})]})};var f=function(e){var t=e.Logout,a=e.user,s=e.messages,n=e.addMessage;return Object(m.jsxs)("div",{className:"dashboard",children:[Object(m.jsx)(h,{Logout:t,user:a,backBtn:!1}),Object(m.jsxs)("div",{className:"chat-window",children:[Object(m.jsx)(p,{messages:s,user:a}),Object(m.jsx)(x,{addMessage:n})]})]})};var v=function(e){var t=e.Logout,a=e.user,s=e.backToDashboard;return Object(m.jsxs)("div",{className:"profile-window profile",children:[Object(m.jsx)(h,{Logout:t,user:a,backToDashboard:s,backBtn:!0}),Object(m.jsxs)("div",{className:"profile-box",children:[Object(m.jsx)("h1",{className:"profile-header profile",children:"Profile info"}),Object(m.jsxs)("div",{className:"profile-body",children:[Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User name"}),Object(m.jsx)("p",{children:a.name})]}),Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User email"}),Object(m.jsx)("p",{children:a.email})]}),a.location&&Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User location"}),Object(m.jsx)("p",{children:a.location})]}),a.about&&Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"About user"}),Object(m.jsx)("p",{children:a.about})]}),Object(m.jsx)(b.b,{to:"/edit",className:"enter btn",children:"Edit"})]})]})]})},g=a(4);var N=function(e){return new RegExp("^(?=.*[0-9])(?=.{8,})").test(e)};var w=function(e){var t=new RegExp("^[a-zA-Z0-9._:$!%-]+@[a-zA-Z0-9.-]+.[a-zA-Z]$");return console.log(t.test(e)),t.test(e)};var y=function(e){var t=e.Logout,a=e.user,n=e.setUser,c=Object(s.useState)({name:a.name,email:a.email,password:a.password,location:a.location?a.location:"",about:a.about?a.about:""}),r=Object(u.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(!1),j=Object(u.a)(l,2),b=j[0],O=j[1],p=Object(s.useState)(!1),x=Object(u.a)(p,2),f=x[0],v=x[1],y=Object(d.f)();return Object(m.jsxs)("div",{className:"profile-area",children:[Object(m.jsx)(h,{Logout:t,user:a,backBtn:!0}),Object(m.jsx)("div",{className:"form-window profile",children:Object(m.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),w(i.email)||O(!0),N(i.pass)||v(!0),f||b||(n(i),y.push("/account"))}(e)},autoComplete:"nope",children:[Object(m.jsx)("h1",{className:"form-header profile",children:"Edit profile"}),b||f?Object(m.jsxs)("div",{className:"form-errors",children:[b&&Object(m.jsx)("h4",{className:"error",children:"Your email is invalid"}),f&&Object(m.jsx)("h4",{className:"error",children:"Your password must contain at least 8 characters at least 1 numeric character"})]}):"",Object(m.jsxs)("div",{className:"form-body",children:[Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User name:"}),Object(m.jsx)("input",{type:"name",id:"name",name:"name",onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{name:e.target.value}))},value:i.name})]}),Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User email:"}),Object(m.jsx)("input",{type:"email",id:"email",name:"email",onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{email:e.target.value}))},value:i.email})]}),Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User password:"}),Object(m.jsx)("input",{type:"password",id:"password",name:"password",onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{password:e.target.value}))},value:i.password})]}),Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"User location:"}),Object(m.jsx)("input",{type:"text",id:"location",name:"location",onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{location:e.target.value}))},value:i.location})]}),Object(m.jsxs)("div",{className:"profile-section",children:[Object(m.jsx)("h4",{children:"About user:"}),Object(m.jsx)("textarea",{name:"about-area",id:"about-area",placeholder:"Tell something about yourself...",onChange:function(e){return o(Object(g.a)(Object(g.a)({},i),{},{about:e.target.value}))},value:i.about})]}),Object(m.jsx)("input",{type:"submit",value:"Save",className:"enter btn"})]})]})})]})};var S=function(e){var t=e.Login,a=e.emailError,n=e.passError,c=e.passErrorChanger,r=e.emailErrorChanger,i=Object(s.useState)({name:"",email:"",password:""}),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(m.jsx)("div",{className:"form-window",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(!1),r(!1),t(l)},autoComplete:"nope",children:[Object(m.jsx)("h2",{className:"form-header",children:"Come and see"}),Object(m.jsx)("h3",{className:"form-subheader",children:"But maybe log in first?"}),a||n?Object(m.jsxs)("div",{className:"form-errors",children:[a&&Object(m.jsx)("h4",{className:"error",children:"Your email is invalid"}),n&&Object(m.jsx)("h4",{className:"error",children:"Your password must contain at least 8 characters at least 1 numeric character"})]}):"",Object(m.jsxs)("div",{className:"form-body login",children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Your name"}),Object(m.jsx)("input",{type:"name",autoComplete:"nope",id:"name",name:"name",onChange:function(e){return j(Object(g.a)(Object(g.a)({},l),{},{name:e.target.value}))},value:l.name})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",autoComplete:"nope",id:"email",name:"email",onChange:function(e){return j(Object(g.a)(Object(g.a)({},l),{},{email:e.target.value}))},value:l.email})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",name:"password",onChange:function(e){return j(Object(g.a)(Object(g.a)({},l),{},{password:e.target.value}))},value:l.password})]}),Object(m.jsx)("input",{type:"submit",value:"Enter the void",className:"enter btn"})]})]})})};a(36);var C=function(){var e=Object(s.useState)(JSON.parse(sessionStorage.getItem("user"))||{name:"",email:"",password:""}),t=Object(u.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(u.a)(c,2),i=r[0],h=r[1],O=Object(s.useState)(!1),p=Object(u.a)(O,2),x=p[0],g=p[1],C=Object(s.useState)(null),E=Object(u.a)(C,2),L=E[0],k=E[1],U="https://api.jsonbin.io/b/609e4af91ad3151d4b2f8aed/latest",F="$2b$10$VYt99Wh61wdDtH0nYhkIMeFQsiSCDYfcwQinNCj9cHUvLfLeZcp0.";Object(s.useEffect)((function(){M().then((function(e){k(e.messages)})).catch((function(e){console.log(e)}))}),[]);var B=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(U,{method:"PUT",headers:{"X-Master-Key":F,"Content-Type":"application/json","X-Bin-Versioning":!1},body:JSON.stringify({messages:L})});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){sessionStorage.setItem("user",JSON.stringify(a))}),[a]);var M=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(U,{method:"GET",headers:{"X-Master-Key":F,"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){n({name:"",email:"",password:""}),h(!1),g(!1),sessionStorage.clear()};return null===L?Object(m.jsx)("h1",{className:"loader",children:"Loading..."}):""===a.name||""===a.email||""===a.password||i||x?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(S,{Login:function(e){w(e.email)||h(!0),N(e.password)||g(!0),i||x||n({name:e.name,email:e.email,password:e.password})},emailError:i,passError:x,passErrorChanger:h,emailErrorChanger:g})}):Object(m.jsx)(b.a,{basename:"/react-chat",children:Object(m.jsxs)("div",{className:"chat-app",children:[Object(m.jsx)(d.c,{children:Object(m.jsx)(d.a,{exact:!0,path:"/",children:Object(m.jsx)(f,{Logout:T,user:a,messages:L,addMessage:function(e){var t={id:L.length+1,user:a.name,text:e};k([].concat(Object(j.a)(L),[t])),B().then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}})})}),Object(m.jsx)(d.c,{children:Object(m.jsx)(d.a,{path:"/account",children:Object(m.jsx)(v,{Logout:T,user:a})})}),Object(m.jsx)(d.c,{children:Object(m.jsx)(d.a,{path:"/edit",children:Object(m.jsx)(y,{Logout:T,user:a,setUser:n})})})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root")),E()}},[[37,1,2]]]);
//# sourceMappingURL=main.a44f12e0.chunk.js.map